{"version":3,"sources":["webpack:///./common/static/xmodule/modules/js/001-77af1014e3a3b6552a294d7816e5487b.js"],"names":["Sequence","element","runtime","self","removeBookmarkIconFromActiveNavItem","event","prototype","apply","addBookmarkIconToActiveNavItem","_change_sequential","direction","selectPrevious","selectNext","toggleArrows","addToUpdatedProblems","problemId","newContentState","newState","hideTabTooltip","displayTabTooltip","arrowKeys","LEFT","UP","RIGHT","DOWN","updatedProblems","requestToken","$","data","el","find","path","contents","content_container","sr_container","num_contents","length","id","getCompletionUrl","handlerUrl","gotoPositionUrl","nextUrl","prevUrl","savePosition","showCompletion","keydownHandler","base_page_title","trim","bind","render","parseInt","selector","click","keypress","keyDownHandler","on","previousNav","focused","index","$navItemList","$sequenceList","parent","last","prev","removeClass","addClass","focus","nextNav","total","first","next","keydown","key","keyCode","$focused","currentTarget","size","preventDefault","updatePageTitle","currentUnitTitle","newPageTitle","positionLink","link_for","position","document","title","text","hookUpContentStateChangeEvent","anyUpdatedProblems","enableButton","buttonClass","buttonAction","removeAttr","disableButton","attr","updateButtonState","isAtBoundary","boundaryUrl","isFirstTab","isLastTab","nextButtonClass","previousButtonClass","unbind","newPosition","bookmarked","currentTab","sequenceLinks","mark_visited","update_completion","postWithPrefix","JSON","stringify","trigger","mark_active","eq","hasClass","html","each","latestData","latestContent","latestResponse","current_score","total_possible","attempts_used","XBlock","initializeBlocks","window","hasOwnProperty","update_schematics","alertTemplate","alertText","isBottomNav","widgetPlacement","undefined","location","href","target","closest","Logger","log","current_tab","target_tab","tab_count","widget_placement","queuePollerID","clearTimeout","gettext","interpolate","tab_name","alert","analyticsEventName","offset","targetUrl","always","scrollTo","previous","tabindex","usageKey","attributes","value","completionIndicators","usage_key","complete","call"],"mappings":"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","file":"SequenceBlockPreview.js","sourcesContent":["/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n/* eslint-disable no-underscore-dangle */\n/* globals Logger, interpolate */\n\n(function() {\n    'use strict';\n\n    this.Sequence = (function() {\n        function Sequence(element, runtime) {\n            var self = this;\n\n            this.removeBookmarkIconFromActiveNavItem = function(event) {\n                return Sequence.prototype.removeBookmarkIconFromActiveNavItem.apply(self, [event]);\n            };\n            this.addBookmarkIconToActiveNavItem = function(event) {\n                return Sequence.prototype.addBookmarkIconToActiveNavItem.apply(self, [event]);\n            };\n            this._change_sequential = function(direction, event) {\n                return Sequence.prototype._change_sequential.apply(self, [direction, event]);\n            };\n            this.selectPrevious = function(event) {\n                return Sequence.prototype.selectPrevious.apply(self, [event]);\n            };\n            this.selectNext = function(event) {\n                return Sequence.prototype.selectNext.apply(self, [event]);\n            };\n            this.goto = function(event) {\n                return Sequence.prototype.goto.apply(self, [event]);\n            };\n            this.toggleArrows = function() {\n                return Sequence.prototype.toggleArrows.apply(self);\n            };\n            this.addToUpdatedProblems = function(problemId, newContentState, newState) {\n                return Sequence.prototype.addToUpdatedProblems.apply(self, [problemId, newContentState, newState]);\n            };\n            this.hideTabTooltip = function(event) {\n                return Sequence.prototype.hideTabTooltip.apply(self, [event]);\n            };\n            this.displayTabTooltip = function(event) {\n                return Sequence.prototype.displayTabTooltip.apply(self, [event]);\n            };\n            this.arrowKeys = {\n                LEFT: 37,\n                UP: 38,\n                RIGHT: 39,\n                DOWN: 40\n            };\n\n            this.updatedProblems = {};\n            this.requestToken = $(element).data('request-token');\n            this.el = $(element).find('.sequence');\n            this.path = $('.path');\n            this.contents = this.$('.seq_contents');\n            this.content_container = this.$('#seq_content');\n            this.sr_container = this.$('.sr-is-focusable');\n            this.num_contents = this.contents.length;\n            this.id = this.el.data('id');\n            this.getCompletionUrl = runtime.handlerUrl(element, 'get_completion');\n            this.gotoPositionUrl = runtime.handlerUrl(element, 'goto_position');\n            this.nextUrl = this.el.data('next-url');\n            this.prevUrl = this.el.data('prev-url');\n            this.savePosition = this.el.data('save-position');\n            this.showCompletion = this.el.data('show-completion');\n            this.keydownHandler($(element).find('#sequence-list .tab'));\n            this.base_page_title = ($('title').data('base-title') || '').trim();\n            this.bind();\n            this.render(parseInt(this.el.data('position'), 10));\n        }\n\n        Sequence.prototype.$ = function(selector) {\n            return $(selector, this.el);\n        };\n\n        Sequence.prototype.bind = function() {\n            this.$('#sequence-list .nav-item').click(this.goto);\n            this.$('#sequence-list .nav-item').keypress(this.keyDownHandler);\n            this.el.on('bookmark:add', this.addBookmarkIconToActiveNavItem);\n            this.el.on('bookmark:remove', this.removeBookmarkIconFromActiveNavItem);\n            this.$('#sequence-list .nav-item').on('focus mouseenter', this.displayTabTooltip);\n            this.$('#sequence-list .nav-item').on('blur mouseleave', this.hideTabTooltip);\n        };\n\n        Sequence.prototype.previousNav = function(focused, index) {\n            var $navItemList,\n                $sequenceList = $(focused).parent().parent();\n            if (index === 0) {\n                $navItemList = $sequenceList.find('li').last();\n            } else {\n                $navItemList = $sequenceList.find('li:eq(' + index + ')').prev();\n            }\n            $sequenceList.find('.tab').removeClass('visited').removeClass('focused');\n            $navItemList.find('.tab').addClass('focused').focus();\n        };\n\n        Sequence.prototype.nextNav = function(focused, index, total) {\n            var $navItemList,\n                $sequenceList = $(focused).parent().parent();\n            if (index === total) {\n                $navItemList = $sequenceList.find('li').first();\n            } else {\n                $navItemList = $sequenceList.find('li:eq(' + index + ')').next();\n            }\n            $sequenceList.find('.tab').removeClass('visited').removeClass('focused');\n            $navItemList.find('.tab').addClass('focused').focus();\n        };\n\n        Sequence.prototype.keydownHandler = function(element) {\n            var self = this;\n            element.keydown(function(event) {\n                var key = event.keyCode,\n                    $focused = $(event.currentTarget),\n                    $sequenceList = $focused.parent().parent(),\n                    index = $sequenceList.find('li')\n                        .index($focused.parent()),\n                    total = $sequenceList.find('li')\n                        .size() - 1;\n                switch (key) {\n                case self.arrowKeys.LEFT:\n                    event.preventDefault();\n                    self.previousNav($focused, index);\n                    break;\n\n                case self.arrowKeys.RIGHT:\n                    event.preventDefault();\n                    self.nextNav($focused, index, total);\n                    break;\n\n                // no default\n                }\n            });\n        };\n\n        Sequence.prototype.displayTabTooltip = function(event) {\n            $(event.currentTarget).find('.sequence-tooltip').removeClass('sr');\n        };\n\n        Sequence.prototype.hideTabTooltip = function(event) {\n            $(event.currentTarget).find('.sequence-tooltip').addClass('sr');\n        };\n\n        Sequence.prototype.updatePageTitle = function() {\n            // update the page title to include the current section\n            var currentUnitTitle,\n                newPageTitle,\n                positionLink = this.link_for(this.position);\n\n            if (positionLink && positionLink.data('page-title')) {\n                currentUnitTitle = positionLink.data('page-title');\n                newPageTitle = currentUnitTitle + ' | ' + this.base_page_title;\n\n                if (newPageTitle !== document.title) {\n                    document.title = newPageTitle;\n                }\n\n                // Update the title section of the breadcrumb\n                $('.nav-item-sequence').text(currentUnitTitle);\n            }\n        };\n\n        Sequence.prototype.hookUpContentStateChangeEvent = function() {\n            var self = this;\n\n            return $('.problems-wrapper').bind('contentChanged', function(event, problemId, newContentState, newState) {\n                return self.addToUpdatedProblems(problemId, newContentState, newState);\n            });\n        };\n\n        Sequence.prototype.addToUpdatedProblems = function(problemId, newContentState, newState) {\n            /**\n            * Used to keep updated problem's state temporarily.\n            * params:\n            *   'problem_id' is problem id.\n            *   'new_content_state' is the updated content of the problem.\n            *   'new_state' is the updated state of the problem.\n            */\n\n            // initialize for the current sequence if there isn't any updated problem for this position.\n            if (!this.anyUpdatedProblems(this.position)) {\n                this.updatedProblems[this.position] = {};\n            }\n\n            // Now, put problem content and score against problem id for current active sequence.\n            this.updatedProblems[this.position][problemId] = [newContentState, newState];\n        };\n\n        Sequence.prototype.anyUpdatedProblems = function(position) {\n            /**\n            * check for the updated problems for given sequence position.\n            * params:\n            *   'position' can be any sequence position.\n            */\n            return typeof(this.updatedProblems[position]) !== 'undefined';\n        };\n\n        Sequence.prototype.enableButton = function(buttonClass, buttonAction) {\n            this.$(buttonClass)\n                .removeClass('disabled')\n                .removeAttr('disabled')\n                .click(buttonAction);\n        };\n\n        Sequence.prototype.disableButton = function(buttonClass) {\n            this.$(buttonClass).addClass('disabled').attr('disabled', true);\n        };\n\n        Sequence.prototype.updateButtonState = function(buttonClass, buttonAction, isAtBoundary, boundaryUrl) {\n            if (isAtBoundary && boundaryUrl === 'None') {\n                this.disableButton(buttonClass);\n            } else {\n                this.enableButton(buttonClass, buttonAction);\n            }\n        };\n\n        Sequence.prototype.toggleArrows = function() {\n            var isFirstTab, isLastTab, nextButtonClass, previousButtonClass;\n\n            this.$('.sequence-nav-button').unbind('click');\n\n            // previous button\n            isFirstTab = this.position === 1;\n            previousButtonClass = '.sequence-nav-button.button-previous';\n            this.updateButtonState(previousButtonClass, this.selectPrevious, isFirstTab, this.prevUrl);\n\n            // next button\n            // use inequality in case contents.length is 0 and position is 1.\n            isLastTab = this.position >= this.contents.length;\n            nextButtonClass = '.sequence-nav-button.button-next';\n            this.updateButtonState(nextButtonClass, this.selectNext, isLastTab, this.nextUrl);\n        };\n\n        Sequence.prototype.render = function(newPosition) {\n            var bookmarked, currentTab, sequenceLinks,\n                self = this;\n            if (this.position !== newPosition) {\n                if (this.position) {\n                    this.mark_visited(this.position);\n                    if (this.showCompletion) {\n                        this.update_completion(this.position);\n                    }\n                    if (this.savePosition) {\n                        $.postWithPrefix(this.gotoPositionUrl, JSON.stringify({\n                            position: newPosition\n                        }));\n                    }\n                }\n\n                // On Sequence change, fire custom event 'sequence:change' on element.\n                // Added for aborting video bufferization, see ../video/10_main.js\n                this.el.trigger('sequence:change');\n                this.mark_active(newPosition);\n                currentTab = this.contents.eq(newPosition - 1);\n                bookmarked = this.el.find('.active .bookmark-icon').hasClass('bookmarked');\n\n                // update the data-attributes with latest contents only for updated problems.\n                this.content_container\n                    .html(currentTab.text())  // xss-lint: disable=javascript-jquery-html\n                    .attr('aria-labelledby', currentTab.attr('aria-labelledby'))\n                    .data('bookmarked', bookmarked);\n\n\n                if (this.anyUpdatedProblems(newPosition)) {\n                    $.each(this.updatedProblems[newPosition], function(problemId, latestData) {\n                        var latestContent, latestResponse;\n                        latestContent = latestData[0];\n                        latestResponse = latestData[1];\n                        self.content_container\n                            .find(\"[data-problem-id='\" + problemId + \"']\")\n                            .data('content', latestContent)\n                            .data('problem-score', latestResponse.current_score)\n                            .data('problem-total-possible', latestResponse.total_possible)\n                            .data('attempts-used', latestResponse.attempts_used);\n                    });\n                }\n                XBlock.initializeBlocks(this.content_container, this.requestToken);\n\n                // For embedded circuit simulator exercises in 6.002x\n                if (window.hasOwnProperty('update_schematics')) {\n                    window.update_schematics();\n                }\n                this.position = newPosition;\n                this.toggleArrows();\n                this.hookUpContentStateChangeEvent();\n                this.updatePageTitle();\n                sequenceLinks = this.content_container.find('a.seqnav');\n                sequenceLinks.click(this.goto);\n\n                this.sr_container.focus();\n            }\n        };\n\n        Sequence.prototype.goto = function(event) {\n            var alertTemplate, alertText, isBottomNav, newPosition, widgetPlacement;\n            event.preventDefault();\n\n            // Links from courseware <a class='seqnav' href='n'>...</a>, was .target_tab\n            if ($(event.currentTarget).hasClass('seqnav')) {\n                newPosition = $(event.currentTarget).attr('href');\n            } else if ($(event.currentTarget).data('href') !== undefined) {\n                location.href = $(event.currentTarget).data('href');\n                return true;\n            // Tab links generated by backend template\n            } else {\n                newPosition = $(event.currentTarget).data('element');\n            }\n\n            if ((newPosition >= 1) && (newPosition <= this.num_contents)) {\n                isBottomNav = $(event.target).closest('nav[class=\"sequence-bottom\"]').length > 0;\n\n                if (isBottomNav) {\n                    widgetPlacement = 'bottom';\n                } else {\n                    widgetPlacement = 'top';\n                }\n\n                // Formerly known as seq_goto\n                Logger.log('edx.ui.lms.sequence.tab_selected', {\n                    current_tab: this.position,\n                    target_tab: newPosition,\n                    tab_count: this.num_contents,\n                    id: this.id,\n                    widget_placement: widgetPlacement\n                });\n\n                // On Sequence change, destroy any existing polling thread\n                // for queued submissions, see ../capa/display.js\n                if (window.queuePollerID) {\n                    window.clearTimeout(window.queuePollerID);\n                    delete window.queuePollerID;\n                }\n                this.render(newPosition);\n            } else {\n                alertTemplate = gettext('Sequence error! Cannot navigate to %(tab_name)s in the current SequenceModule. Please contact the course staff.');  // eslint-disable-line max-len\n                alertText = interpolate(alertTemplate, {\n                    tab_name: newPosition\n                }, true);\n                alert(alertText);  // eslint-disable-line no-alert\n            }\n        };\n\n        Sequence.prototype.selectNext = function(event) {\n            this._change_sequential('next', event);\n        };\n\n        Sequence.prototype.selectPrevious = function(event) {\n            this._change_sequential('previous', event);\n        };\n\n        // `direction` can be 'previous' or 'next'\n        Sequence.prototype._change_sequential = function(direction, event) {\n            var analyticsEventName, isBottomNav, newPosition, offset, targetUrl, widgetPlacement;\n\n            // silently abort if direction is invalid.\n            if (direction !== 'previous' && direction !== 'next') {\n                return;\n            }\n            event.preventDefault();\n            analyticsEventName = 'edx.ui.lms.sequence.' + direction + '_selected';\n            isBottomNav = $(event.target).closest('nav[class=\"sequence-bottom\"]').length > 0;\n\n            if (isBottomNav) {\n                widgetPlacement = 'bottom';\n            } else {\n                widgetPlacement = 'top';\n            }\n\n            if ((direction === 'next') && (this.position >= this.contents.length)) {\n                targetUrl = this.nextUrl;\n            } else if ((direction === 'previous') && (this.position === 1 || this.contents.length === 0)) {\n                targetUrl = this.prevUrl;\n            }\n\n            // Formerly known as seq_next and seq_prev\n            Logger.log(analyticsEventName, {\n                id: this.id,\n                current_tab: this.position,\n                tab_count: this.num_contents,\n                widget_placement: widgetPlacement\n            }).always(function() {\n                if (targetUrl) {\n                    // Wait to load the new page until we've attempted to log the event\n                    window.location.href = targetUrl;\n                }\n            });\n\n            // If we're staying on the page, no need to wait for the event logging to finish\n            if (!targetUrl) {\n                // If the bottom nav is used, scroll to the top of the page on change.\n                if (isBottomNav) {\n                    $.scrollTo(0, 150);\n                }\n\n                offset = {\n                    next: 1,\n                    previous: -1\n                };\n\n                newPosition = this.position + offset[direction];\n                this.render(newPosition);\n            }\n        };\n\n        Sequence.prototype.link_for = function(position) {\n            return this.$('#sequence-list .nav-item[data-element=' + position + ']');\n        };\n\n        Sequence.prototype.mark_visited = function(position) {\n            // Don't overwrite class attribute to avoid changing Progress class\n            var element = this.link_for(position);\n            element.attr({tabindex: '-1', 'aria-selected': 'false', 'aria-expanded': 'false'})\n                .removeClass('inactive')\n                .removeClass('active')\n                .removeClass('focused')\n                .addClass('visited');\n        };\n\n        Sequence.prototype.update_completion = function(position) {\n            var element = this.link_for(position);\n            var usageKey = element[0].attributes['data-id'].value;\n            var completionIndicators = element.find('.check-circle');\n            if (completionIndicators.length) {\n                $.postWithPrefix(this.getCompletionUrl, JSON.stringify({\n                    usage_key: usageKey\n                }), function(data) {\n                    if (data.complete === true) {\n                        completionIndicators.removeClass('is-hidden');\n                    }\n                });\n            }\n            // Reload progress bar\n            this.$('#progress-frame').attr('src', this.$('#progress-frame').attr('src'));\n        };\n\n        Sequence.prototype.mark_active = function(position) {\n            // Don't overwrite class attribute to avoid changing Progress class\n            var element = this.link_for(position);\n            element.attr({tabindex: '0', 'aria-selected': 'true', 'aria-expanded': 'true'})\n                .removeClass('inactive')\n                .removeClass('visited')\n                .removeClass('focused')\n                .addClass('active');\n            this.$('.sequence-list-wrapper').focus();\n        };\n\n        Sequence.prototype.addBookmarkIconToActiveNavItem = function(event) {\n            event.preventDefault();\n            this.el.find('.nav-item.active .bookmark-icon').removeClass('is-hidden').addClass('bookmarked');\n            this.el.find('.nav-item.active .bookmark-icon-sr').text(gettext('Bookmarked'));\n        };\n\n        Sequence.prototype.removeBookmarkIconFromActiveNavItem = function(event) {\n            event.preventDefault();\n            this.el.find('.nav-item.active .bookmark-icon').removeClass('bookmarked').addClass('is-hidden');\n            this.el.find('.nav-item.active .bookmark-icon-sr').text('');\n        };\n\n        return Sequence;\n    }());\n}).call(this);\n\n}.call(window));\n\n\n// WEBPACK FOOTER //\n// ./common/static/xmodule/modules/js/001-77af1014e3a3b6552a294d7816e5487b.js"],"sourceRoot":""}