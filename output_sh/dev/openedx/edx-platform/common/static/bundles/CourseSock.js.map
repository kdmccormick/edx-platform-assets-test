{"version":3,"sources":["webpack:///./openedx/features/course_experience/static/course_experience/js/CourseSock.js"],"names":["CourseSock","$toggleActionButton","$","$verificationSock","$upgradeToVerifiedButton","$miniCert","pageLocation","window","location","href","indexOf","fixUpgradeButton","is","documentBottom","scrollTop","height","startFixed","offset","top","endFixed","distRight","outerWidth","left","width","addClass","css","removeClass","length","scroll","resize","on","toggleSpeed","toggleClass","slideToggle","newAriaExpandedState","attr","isOpening","hasClass","logMessage","analytics","track","from_page","Logger","log"],"mappings":"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","file":"CourseSock.js","sourcesContent":["/* globals Logger */\n\nexport class CourseSock {  // eslint-disable-line import/prefer-default-export\n  constructor() {\n    const $toggleActionButton = $('.action-toggle-verification-sock');\n    const $verificationSock = $('.verification-sock .verification-main-panel');\n    const $upgradeToVerifiedButton = $('.verification-sock .action-upgrade-certificate');\n    const $miniCert = $('.mini-cert');\n    const pageLocation = window.location.href.indexOf('courseware') > -1\n        ? 'Course Content Page' : 'Home Page';\n\n    // Behavior to fix button to bottom of screen on scroll\n    const fixUpgradeButton = () => {\n      if (!$upgradeToVerifiedButton.is(':visible')) return;\n\n      // Grab the current scroll location\n      const documentBottom = $(window).scrollTop() + $(window).height();\n\n      // Establish a sliding window in which the button is fixed\n      const startFixed = $verificationSock.offset().top + 320;\n      const endFixed = (startFixed + $verificationSock.height()) - 220;\n\n      // Ensure update button stays in sock even when max-width is exceeded\n      const distRight = window.outerWidth - ($miniCert.offset().left + $miniCert.width());\n\n      // Update positioning when scrolling is in fixed window and screen width is sufficient\n      if ((documentBottom > startFixed && documentBottom < endFixed\n          && $(window).width() > 960)) {\n        $upgradeToVerifiedButton.addClass('attached');\n        $upgradeToVerifiedButton.css('right', `${distRight}px`);\n      } else {\n        // If outside sliding window, reset to un-attached state\n        $upgradeToVerifiedButton.removeClass('attached');\n        $upgradeToVerifiedButton.css('right', '20px');\n\n        // Add class to define absolute location\n        if (documentBottom < startFixed) {\n          $upgradeToVerifiedButton.addClass('stuck-top');\n          $upgradeToVerifiedButton.removeClass('stuck-bottom');\n        } else if (documentBottom > endFixed) {\n          $upgradeToVerifiedButton.addClass('stuck-bottom');\n          $upgradeToVerifiedButton.removeClass('stuck-top');\n        }\n      }\n    };\n\n    // Fix the sock to the screen on scroll and resize events\n    if ($upgradeToVerifiedButton.length) {\n      $(window).scroll(fixUpgradeButton).resize(fixUpgradeButton);\n    }\n\n    // Open the sock when user clicks to Learn More\n    $toggleActionButton.on('click', () => {\n      const toggleSpeed = 400;\n      $toggleActionButton.toggleClass('active');\n      $verificationSock.slideToggle(toggleSpeed, fixUpgradeButton);\n\n      // Toggle aria-expanded attribute\n      const newAriaExpandedState = $toggleActionButton.attr('aria-expanded') === 'false';\n      $toggleActionButton.attr('aria-expanded', newAriaExpandedState);\n\n      // Log open and close events\n      const isOpening = $toggleActionButton.hasClass('active');\n      const logMessage = isOpening ? 'edx.bi.course.sock.toggle_opened'\n          : 'edx.bi.course.sock.toggle_closed';\n      window.analytics.track(\n        logMessage,\n        {\n          from_page: pageLocation,\n        },\n      );\n    });\n\n    $upgradeToVerifiedButton.on('click', () => {\n      Logger.log(\n        'edx.course.enrollment.upgrade.clicked',\n        {\n          location: 'sock',\n        },\n      );\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./openedx/features/course_experience/static/course_experience/js/CourseSock.js"],"sourceRoot":""}