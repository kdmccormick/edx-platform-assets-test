{"version":3,"sources":["webpack:///./common/static/js/vendor/jquery.cookie.js?f386****","webpack:///./openedx/features/course_experience/static/course_experience/js/currency.js"],"names":["$","cookie","key","value","options","arguments","length","test","Object","prototype","toString","call","undefined","extend","expires","days","t","Date","setDate","getDate","String","document","encodeURIComponent","raw","toUTCString","path","domain","secure","join","decode","s","decodeURIComponent","pairs","split","i","pair","jQuery","Currency","ready","getCountry","price","l10nCookie","countryL10nData","lmsregex","priceText","text","regexMatch","exec","currentPrice","dollars","parseFloat","newPrice","rate","newPriceString","symbol","Math","round","code","each","editText","JSON","parse","e","SyntaxError","console","error","window","analytics","track","setPrice"],"mappings":"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","file":"Currency.js","sourcesContent":["/*!\n * jQuery Cookie Plugin\n * https://github.com/carhartl/jquery-cookie\n *\n * Copyright 2011, Klaus Hartl\n * Dual licensed under the MIT or GPL Version 2 licenses.\n * http://www.opensource.org/licenses/mit-license.php\n * http://www.opensource.org/licenses/GPL-2.0\n */\n(function($) {\n    $.cookie = function(key, value, options) {\n\n        // key and at least value given, set cookie...\n        if (arguments.length > 1 && (!/Object/.test(Object.prototype.toString.call(value)) || value === null || value === undefined)) {\n            options = $.extend({}, options);\n\n            if (value === null || value === undefined) {\n                options.expires = -1;\n            }\n\n            if (typeof options.expires === 'number') {\n                var days = options.expires, t = options.expires = new Date();\n                t.setDate(t.getDate() + days);\n            }\n\n            value = String(value);\n\n            return (document.cookie = [\n                encodeURIComponent(key), '=', options.raw ? value : encodeURIComponent(value),\n                options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\n                options.path    ? '; path=' + options.path : '',\n                options.domain  ? '; domain=' + options.domain : '',\n                options.secure  ? '; secure' : ''\n            ].join(''));\n        }\n\n        // key and possibly options given, get cookie...\n        options = value || {};\n        var decode = options.raw ? function(s) { return s; } : decodeURIComponent;\n\n        var pairs = document.cookie.split('; ');\n        for (var i = 0, pair; pair = pairs[i] && pairs[i].split('='); i++) {\n            if (decode(pair[0]) === key) return decode(pair[1] || ''); // IE saves cookies with empty string as \"c; \", e.g. without \"=\" as opposed to EOMB, thus pair[1] may be undefined\n        }\n        return null;\n    };\n})(jQuery);\n\n\n\n// WEBPACK FOOTER //\n// ./common/static/js/vendor/jquery.cookie.js","import 'jquery.cookie';\nimport $ from 'jquery'; // eslint-disable-line import/extensions\n\nexport class Currency {  // eslint-disable-line import/prefer-default-export\n\n  editText(price) {\n    const l10nCookie = this.countryL10nData;\n    const lmsregex = /(\\$)([\\d|.]*)( USD)/g;\n    const priceText = price.text();\n    const regexMatch = lmsregex.exec(priceText);\n    if (regexMatch) {\n      const currentPrice = regexMatch[2];\n      const dollars = parseFloat(currentPrice);\n      const newPrice = dollars * l10nCookie.rate;\n      const newPriceString = `${l10nCookie.symbol}${Math.round(newPrice)} ${l10nCookie.code}`;\n      // Change displayed price based on edx-price-l10n cookie currency_data\n      price.text(newPriceString);\n    }\n  }\n\n  setPrice() {\n    $('.upgrade-price-string').each((i, price) => {\n      // When the button includes two prices (discounted and previous)\n      // we call the method twice, since it modifies one price at a time.\n      // Could also be used to modify all prices on any page\n      this.editText($(price));\n    });\n  }\n\n  getCountry() {\n    try {\n      this.countryL10nData = JSON.parse($.cookie('edx-price-l10n'));\n    } catch (e) {\n      if (e instanceof SyntaxError) {\n        // If cookie isn't proper JSON, log but continue. This will show the purchase experience\n        // in a non-local currency but will not prevent the user from interacting with the page.\n        console.error(e);\n        console.error(\"Ignoring malformed 'edx-price-l10n' cookie.\");\n      } else {\n        throw e;\n      }\n    }\n    if (this.countryL10nData) {\n      window.analytics.track('edx.bi.user.track_selection.local_currency_cookie_set');\n      this.setPrice();\n    }\n  }\n\n  constructor() {\n    $(document).ready(() => {\n      this.getCountry();\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./openedx/features/course_experience/static/course_experience/js/currency.js"],"sourceRoot":""}